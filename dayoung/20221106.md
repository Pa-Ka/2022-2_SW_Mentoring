# 서비스 개발 - 2
_22.11.06 study_
***
## 템플릿 필터 제작
> 유저의 인터페이스를 좀 더 자연스럽게 만드는 과정

1. 필터 함수 만들기
```python
def format_datetime(value, fmt='%Y년 %m월 %d일 %p %I:%M'):
    return value.strftime(fmt)
```
- 위의 함소는 전달받은 datetime 객체(value)를 날짜 포맷 형식(fmt)에 맞게 변환하여 리턴
- fmt가 전달되지 않을 경우, 디폴트값은 '%Y년 %m월 %d일 %p %I:%M' 이다.

2. 앱에 필터 등록 하기
```python
    # 필터
    from .filter import format_datetime
    app.jinja_env.filters['datetime'] = format_datetime
```
- 앞서 제작한 함수를 임포트아려 필터를 등록

3. 필터 사용하기
```html
<td>{{ question.create_date|datetime }}</td>
```
- 파이트라인 문자와 함께 datetime 필터 적용
- format_datetime의 매개변수 value에 question.create_date가 전달

## 게시물에 일련번호 추가
> 게시물 페이지가 이동될때마다 1에서 2로, 2에서 으로 바뀌도록 
> 게시물 순서가 최신순으로 나열되도록

1. 게시물 번호 공식 만들기
- 번호 = 전체 게시물 개수 - (현재 페이지 - 1) * 페이지당 게시물 개수 - 나열 인덱스
2. 게시물 번호 공식을 템플릿에 적용
```html
<td>{{ question_list.total - ((question_list.page-1) * question_list.per_page) - loop.index0 }}</td>
```
- question_list.total : 전체 게시물 개수
- question_list.page : 현재 페이지
- question_list.per_page : 페이지당 게시물 개수
- loop.index() : 나열 인덱스 (0부터 시작)
